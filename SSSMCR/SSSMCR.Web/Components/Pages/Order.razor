@page "/order/{id:int}"
@using System.Net.Http.Json
@using Microsoft.AspNetCore.Components
@inject HttpClient Http

<h3>Order Details</h3>

@if (order == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div>
        <p><strong>Order ID:</strong> @order.Id</p>
        <p><strong>Customer:</strong> @order.CustomerName</p>
        <p><strong>Date:</strong> @order.OrderDate.ToString("yyyy-MM-dd")</p>
        <p><strong>Total:</strong> @order.Total</p>
    </div>
}

@code {
    [Parameter]
    public int id { get; set; }

    private OrderDto order;

    protected override async Task OnInitializedAsync()
    {
        order = await Http.GetFromJsonAsync<OrderDto>($"api/orders/{id}");
    }
    
    public class OrderDto
    {
        public int Id { get; set; }
        public string CustomerName { get; set; }
        public DateTime OrderDate { get; set; }
        public decimal Total { get; set; }
    }
}